<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Sistema Raciones{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        /* SIDEBAR */
        #sidebar {
            width: 260px;
            height: 100vh;
            background: #0d6efd;
            position: fixed;
            top: 0;
            left: -260px;
            padding: 20px;
            transition: 0.3s ease;
            z-index: 2000;
        }

        #sidebar.show {
            left: 0;
        }

        /* CONTENIDO */
        #content {
            transition: margin-left 0.3s ease;
            margin-left: 0;
        }

        #content.shift {
            margin-left: 260px;
        }

        .sidebar-link {
            color: white;
            text-decoration: none;
            display: block;
            padding: 12px 0;
            font-size: 18px;
        }

        .sidebar-link:hover {
            opacity: 0.8;
        }

        /* BOT√ìN MENU */
        #menuBtn {
            position: fixed;
            top: 15px;
            left: 15px;
            z-index: 3001;
            font-size: 22px;
            width: 45px;
            height: 45px;
        }

        /* BOT√ìN CERRAR */
        #closeBtn {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 26px;
            color: white;
            cursor: pointer;
            display: none; /* Se muestra cuando sidebar est√° abierto */
        }

        #sidebar.show #closeBtn {
            display: block;
        }
    </style>
</head>

<body>

    <!-- BOT√ìN ABRIR (‚ò∞) -->
    <button id="menuBtn" class="btn btn-primary" onclick="toggleSidebar()">‚ò∞</button>

    <!-- SIDEBAR -->
    <div id="sidebar">
        <span id="closeBtn" onclick="toggleSidebar()">‚úñ</span>

        <h4 class="text-white mb-4 mt-4">Men√∫</h4>

        {% if user.is_authenticated %}

            {% if user.is_superuser %}
                <!-- SOLO ADMIN -->
                <a class="sidebar-link" href="/dashboard/">üìä Dashboard</a>
                <a class="sidebar-link" href="/proyecciones/">üìà Proyecciones</a>
                <a class="sidebar-link" href="/registros/">üìö Registros</a>
                <a class="sidebar-link" href="/configuraciones/">‚öôÔ∏è Configuraciones</a>
            {% endif %}

            <!-- ADMIN + TRABAJADOR -->
            <a class="sidebar-link" href="/raciones/">üçó Raciones</a>
            <hr class="text-white">
            <a class="sidebar-link" href="/logout/">üîì Cerrar sesi√≥n</a>

        {% endif %}
    </div>

    <!-- CONTENIDO -->
    <div id="content" class="p-4 mt-4">
        {% block content %}
        {% endblock %}
    </div>

    <script>
        function toggleSidebar() {
            const sidebar = document.getElementById("sidebar");
            const content = document.getElementById("content");
            const menuBtn = document.getElementById("menuBtn");

            sidebar.classList.toggle("show");
            content.classList.toggle("shift");

            // Cambiar icono seg√∫n estado
            if (sidebar.classList.contains("show")) {
                menuBtn.style.display = "none";  // ocultar ‚ò∞
            } else {
                menuBtn.style.display = "block"; // mostrar ‚ò∞
            }
        }
    </script>

</body>
</html>
